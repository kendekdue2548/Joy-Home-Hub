<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เข้าสู่ระบบ - Me Sofa Design</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>

    <div class="auth-container">
        <div class="auth-header">
            <h2><i class="fas fa-couch"></i> ME SOFA</h2>
            <p>ยินดีต้อนรับกลับเข้าสู่ระบบ</p>
        </div>

        <div class="auth-tabs">
            <button class="tab-btn active" id="btn-login-email" onclick="switchTab('email')">อีเมล</button>
            <button class="tab-btn" id="btn-login-phone" onclick="switchTab('phone')">เบอร์โทรศัพท์</button>
        </div>

        <form id="form-email">
            <div class="form-group">
                <label>อีเมล หรือ ชื่อผู้ใช้</label>
                <input type="text" id="login-email-user" placeholder="กรอกอีเมลของคุณ">
            </div>
            <div class="form-group">
                <label>รหัสผ่าน</label>
                <input type="password" id="login-email-pass" placeholder="กรอกรหัสผ่าน">
            </div>
            <div style="text-align: right; margin-bottom: 20px;">
                <a href="#" style="font-size: 0.85rem; color: #888; text-decoration: none;">ลืมรหัสผ่าน?</a>
            </div>
            <button type="button" class="btn-auth" onclick="loginUser('email')">เข้าสู่ระบบ</button>
        </form>

        <form id="form-phone" style="display: none;">
            <div class="form-group">
                <label>เบอร์โทรศัพท์</label>
                <input type="tel" id="login-phone-user" placeholder="08x-xxx-xxxx">
            </div>

            <div class="form-group">
                <label>รหัสผ่าน</label>
                <input type="password" id="login-phone-pass" placeholder="กรอกรหัสผ่าน">
            </div>

            <div style="text-align: right; margin-bottom: 20px;">
                <a href="#" style="font-size: 0.85rem; color: #888; text-decoration: none;">ลืมรหัสผ่าน?</a>
            </div>

            <button type="button" class="btn-auth" onclick="loginUser('phone')">เข้าสู่ระบบ</button>
        </form>

        <div class="auth-footer">
            ยังไม่มีบัญชีใช่ไหม? <a href="register.html">สมัครสมาชิกที่นี่</a>
        </div>
        <a href="index.html" class="back-home"><i class="fas fa-arrow-left"></i> กลับไปหน้าหลัก</a>
    </div>

    <script>
        // ฟังก์ชันสลับแท็บระหว่าง อีเมล และ เบอร์โทรศัพท์
        function switchTab(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            if (type === 'email') {
                document.getElementById('btn-login-email').classList.add('active');
                document.getElementById('form-email').style.display = 'block';
                document.getElementById('form-phone').style.display = 'none';
            } else {
                document.getElementById('btn-login-phone').classList.add('active');
                document.getElementById('form-email').style.display = 'none';
                document.getElementById('form-phone').style.display = 'block';
            }
        }

        // ฟังก์ชันเข้าสู่ระบบ (ใช้งานได้จริง)
        function loginUser(type) {
            const username = document.getElementById(`login-${type}-user`).value.trim();
            const pass = document.getElementById(`login-${type}-pass`).value;

            if(username === "" || pass === "") {
                alert("กรุณากรอกข้อมูลให้ครบถ้วน");
                return;
            }

            // --- ตรวจสอบสิทธิ์ Admin (ken / ken) ---
            if (username === 'ken' && pass === 'ken') {
                const adminUser = { 
                    name: 'Super Admin', 
                    username: 'ken', 
                    role: 'admin' 
                };
                localStorage.setItem('currentUser', JSON.stringify(adminUser));
                alert("เข้าสู่ระบบในฐานะ Admin สำเร็จ!");
                window.location.href = 'index.html';
                return;
            }

            // --- ตรวจสอบผู้ใช้ทั่วไปในระบบ (LocalStorage) ---
            const users = JSON.parse(localStorage.getItem('users')) || [];
            // ค้นหาผู้ใช้ที่ username และ password ตรงกัน
            const validUser = users.find(u => u.username === username && u.password === pass);

            if (validUser) {
                // บันทึกสถานะผู้ใช้ที่กำลังล็อกอินปัจจุบัน
                localStorage.setItem('currentUser', JSON.stringify(validUser));
                alert("เข้าสู่ระบบสำเร็จ! ยินดีต้อนรับคุณ " + validUser.name);
                window.location.href = 'index.html';
            } else {
                alert("ชื่อผู้ใช้งานหรือรหัสผ่านไม่ถูกต้อง");
            }
        }
    </script>
</body>
</html>
