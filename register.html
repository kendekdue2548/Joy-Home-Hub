<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สมัครสมาชิก - Me Sofa Design</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>

    <div class="auth-container">
        <div class="auth-header">
            <h2><i class="fas fa-couch"></i> ME SOFA</h2>
            <p>สร้างบัญชีใหม่เพื่อรับสิทธิพิเศษและส่วนลด</p>
        </div>

        <div class="auth-tabs">
            <button class="tab-btn active" onclick="switchTab('email')">อีเมล</button>
            <button class="tab-btn" onclick="switchTab('phone')">เบอร์โทรศัพท์</button>
        </div>

        <form id="form-email">
            <div class="form-group">
                <label>ชื่อ - นามสกุล</label>
                <input type="text" id="reg-email-name" placeholder="เช่น สมชาย ใจดี">
            </div>
            <div class="form-group">
                <label>อีเมล</label>
                <input type="email" id="reg-email-user" placeholder="example@email.com">
            </div>
            <div class="form-group">
                <label>รหัสผ่าน</label>
                <input type="password" id="reg-email-pass" placeholder="อย่างน้อย 8 ตัวอักษร">
            </div>
            <div class="form-group">
                <label>ยืนยันรหัสผ่าน</label>
                <input type="password" id="reg-email-confirm" placeholder="กรอกรหัสผ่านอีกครั้ง">
            </div>
            <button type="button" class="btn-auth" onclick="registerUser('email')">สมัครสมาชิก</button>
        </form>

        <form id="form-phone" style="display: none;">
            <div class="form-group">
                <label>ชื่อ - นามสกุล</label>
                <input type="text" id="reg-phone-name" placeholder="เช่น สมชาย ใจดี">
            </div>
            
            <div class="form-group">
                <label>เบอร์โทรศัพท์</label>
                <input type="tel" id="reg-phone-user" placeholder="08x-xxx-xxxx">
            </div>

            <div class="form-group">
                <label>กำหนดรหัสผ่าน</label>
                <input type="password" id="reg-phone-pass" placeholder="อย่างน้อย 8 ตัวอักษร">
            </div>

            <div class="form-group">
                <label>ยืนยันรหัสผ่าน</label>
                <input type="password" id="reg-phone-confirm" placeholder="กรอกรหัสผ่านอีกครั้ง">
            </div>

            <button type="button" class="btn-auth" onclick="registerUser('phone')">สมัครสมาชิก</button>
        </form>

        <div class="auth-footer">
            มีบัญชีอยู่แล้ว? <a href="login.html">เข้าสู่ระบบ</a>
        </div>
        <a href="index.html" class="back-home"><i class="fas fa-arrow-left"></i> กลับไปหน้าหลัก</a>
    </div>

    <script>
        function switchTab(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (type === 'email') {
                document.getElementById('form-email').style.display = 'block';
                document.getElementById('form-phone').style.display = 'none';
            } else {
                document.getElementById('form-email').style.display = 'none';
                document.getElementById('form-phone').style.display = 'block';
            }
        }

        // --- ระบบบันทึกข้อมูลสมาชิก (Database จำลอง) ---
        function registerUser(type) {
            const name = document.getElementById(`reg-${type}-name`).value;
            const username = document.getElementById(`reg-${type}-user`).value;
            const pass = document.getElementById(`reg-${type}-pass`).value;
            const confirm = document.getElementById(`reg-${type}-confirm`).value;

            // ตรวจสอบความว่างเปล่า
            if(!name || !username || !pass) {
                alert("กรุณากรอกข้อมูลให้ครบถ้วน");
                return;
            }

            // ตรวจสอบรหัสผ่านตรงกัน
            if(pass !== confirm) {
                alert("รหัสผ่านยืนยันไม่ตรงกัน");
                return;
            }

            // ดึงข้อมูลเก่าจาก LocalStorage
            let users = JSON.parse(localStorage.getItem('users')) || [];

            // ตรวจสอบว่ามีชื่อนี้ซ้ำไหม
            if(users.find(u => u.username === username)) {
                alert("อีเมลหรือเบอร์โทรนี้ถูกใช้สมัครไปแล้ว");
                return;
            }

            // บันทึกคนใหม่
            users.push({ name, username, password: pass });
            localStorage.setItem('users', JSON.stringify(users));

            alert("สมัครสมาชิกสำเร็จ!");
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
